<app-sub-header [heading]="heading"></app-sub-header>


<section class="sec-space">
  <div class="container">

    <div class="row filter-row">
      <div class="col-sm-12">
        <h4 class="mb-2">Search By Tags:</h4>
        
        <div class="row">
          <div class="col-sm-8">
            <mat-form-field class="mr-2" style="max-width: 100%; width: 100%">
              <mat-chip-list #chipList>
                <mat-chip *ngFor="let tag of tags" [selectable]="selectable"
                          [removable]="removable" (removed)="remove(tag)">
                  {{tag.name}}
                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="New Tags..."
                        [matChipInputFor]="chipList"
                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                        [matChipInputAddOnBlur]="addOnBlur"
                        (matChipInputTokenEnd)="add($event)">
              </mat-chip-list>
            </mat-form-field>
          </div>
          <div class="col-sm-4">
            <button mat-raised-button color="accent" [disabled]="!tags?.length" (click)="ftrBlogs()">Search</button>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12 mb-4">
      </div>
    </div>

    <div class="row">

      <div *ngIf="!blogs?.length" class="col-sm-12 text-center">
        <app-shared-inline-loader></app-shared-inline-loader>
        <p style="margin-top: -90px">Getting News & Updates...</p>
      </div>

      <ng-container *ngIf="blogs?.length">
        <div class="col-sm-6" *ngFor="let blog of blogs">
          <div class="card mb-4">
            <img class="card-img-top" *ngIf="blog?.img" [src]="blog.img" [alt]="blog.description">
            
            <span *ngIf="blog?.banner?.link; then normImgTemp; else dummyImgTemp"></span>
            <ng-template #normImgTemp>
              <div 
                class="mb-3 cardImgs card-img-top"
                [ngStyle]="{'background' : 'url('+ blog.banner.link +')'}">
              </div>
            </ng-template>
            <ng-template #dummyImgTemp>
              <div 
                class="mb-3 cardImgs card-img-top"
                [ngStyle]="{'background' : 'url(assets/img/strip.png)'}">
              </div>
            </ng-template>

             <div class="card-body">
              <h5 class="card-title">{{ blog.title }}</h5>
              <p class="card-text">{{ blog.description }}</p>
              <div class="text-right">
                <a mat-button color="primary" [routerLink]="[blog._id]">Read More</a>
              </div>
            </div>
            <div class="card-footer">
              <mat-chip-list>
                <mat-chip *ngFor="let tag of blog.tags">{{ tag }}</mat-chip>
              </mat-chip-list>
            </div>
          </div>
        </div>
      </ng-container>

    </div>
  </div>
</section>

<section class="sec-space-b"></section>